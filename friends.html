<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>PlayChat - Friends</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins', sans-serif; }

    :root{
      --glass: rgba(255,255,255,0.12);
      --glass-2: rgba(0,0,0,0.28);
      --accent: linear-gradient(90deg,#ff758c,#ff7eb3);
    }

    html,body { width:100%; height:100%; }

    body {
        background: linear-gradient(135deg,#667eea,#764ba2,#ff758c,#ff7eb3);
        background-size:400% 400%;
        animation:gradientBG 15s ease infinite;
        display:flex; flex-direction:column; color:#fff;
        min-height:100vh;
    }
    @keyframes gradientBG {
        0%{background-position:0% 50%;}
        50%{background-position:100% 50%;}
        100%{background-position:0% 50%;}
    }

    .header {
        width:100%;
        height:60px;
        display:flex;
        justify-content:space-between;
        align-items:center;
        padding:0 16px;
        background: var(--glass-2);
        backdrop-filter: blur(12px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        position:sticky; top:0; z-index:100;
    }
    .header h1 { font-size:1.4rem; font-weight:700; letter-spacing:0.2px; }
    .header .header-actions { display:flex; gap:8px; align-items:center; }
    .header button {
        padding:8px 14px; border:none; border-radius:30px;
        background:var(--accent); color:#fff; font-weight:600;
        cursor:pointer; transition:transform .18s ease;
        box-shadow:0 4px 10px rgba(0,0,0,0.2);
    }
    .header button:active { transform:scale(.98); }

    .subtabs {
      display:flex; gap:8px; width:100%; max-width:420px; margin:12px auto 0;
      padding:6px; justify-content:center;
    }
    .tab {
      background: rgba(255,255,255,0.06); padding:8px 12px; border-radius:20px;
      cursor:pointer; font-weight:600; font-size:0.9rem;
    }
    .tab.active { background:rgba(255,255,255,0.16); }

    .container {
        flex:1;
        display:flex;
        flex-direction:column;
        padding:12px 12px 80px 12px;
        overflow-y:auto;
        align-items:center;
    }

    .search-box {
        width:100%; max-width:420px; margin:10px auto 12px auto;
        display:flex; align-items:center; gap:8px;
        background: var(--glass);
        backdrop-filter: blur(15px);
        border-radius:25px; padding:8px 12px;
    }
    .search-box input {
        width:100%; padding:8px 10px; border:none; background:none; color:#fff;
        font-size:1rem; outline:none;
    }

    .friends-wrap { width:100%; max-width:420px; display:flex; flex-direction:column; gap:12px; margin-top:6px; }

    .friend-card {
        display:flex; align-items:center; justify-content:space-between;
        padding:10px 12px; background:var(--glass); border-radius:14px;
        box-shadow:0 6px 15px rgba(0,0,0,0.18); gap:8px;
    }
    .friend-left { display:flex; align-items:center; gap:12px; cursor:default; flex:1; }
    .friend-left img {
        width:52px; height:52px; border-radius:50%; object-fit:cover; border:2px solid rgba(255,255,255,0.12);
    }
    .friend-meta { display:flex; flex-direction:column; }
    .friend-meta .name { font-weight:700; font-size:1rem; }
    .friend-meta .handle { font-size:0.85rem; color:#eee; margin-top:4px; }

    .friend-actions {
        display:flex; gap:8px; align-items:center;
    }
    .btn {
        padding:7px 10px; border-radius:14px; border:none; cursor:pointer; font-weight:600;
        background:transparent; color:#fff;
    }
    .btn.primary { background:var(--accent); box-shadow:0 6px 12px rgba(0,0,0,0.2); }
    .btn.ghost { background: rgba(255,255,255,0.06); }
    .icon-btn { width:40px; height:40px; border-radius:12px; display:grid; place-items:center; }

    /* Request badges */
    .badge { padding:6px 9px; border-radius:12px; font-weight:700; font-size:0.8rem; }

    /* Responsive tweaks */
    @media(max-width:420px){
        .header h1{font-size:1.2rem;}
        .friend-left img{width:48px;height:48px;}
        .btn{padding:6px 8px;}
    }

</style>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<script src="firebase.js"></script>
<script src="auth.js"></script>
<script src="friends.js"></script>
</head>
<body>

<div class="header">
    <h1>Friends</h1>
    <div class="header-actions">
        <button onclick="openRequestsView()">Requests</button>
        <button onclick="logout()">Logout</button>
    </div>
</div>

<div class="subtabs" role="tablist" aria-label="Friends tabs">
  <div class="tab active" id="tab-all" onclick="switchTab('all')">All</div>
  <div class="tab" id="tab-following" onclick="switchTab('following')">Following</div>
  <div class="tab" id="tab-requests" onclick="switchTab('requests')">Incoming</div>
</div>

<div class="container">
    <div class="search-box">
        <input type="text" id="searchFriend" placeholder="Search people..." onkeyup="searchFriends()"/>
        <button class="btn ghost" onclick="clearSearch()">Clear</button>
    </div>

    <div class="friends-wrap" id="friendsList" aria-live="polite"></div>

    <!-- Incoming requests area (toggleable) -->
    <div style="width:100%;max-width:420px;margin-top:12px;">
      <div id="incomingRequestsList"></div>
    </div>
</div>

<div class="bottom-nav" style="width:100%;height:65px;display:flex;justify-content:space-around;align-items:center;background: rgba(0,0,0,0.3);backdrop-filter: blur(12px);position:sticky; bottom:0;box-shadow:0 -4px 12px rgba(0,0,0,0.25);">
    <button onclick="goHome()"><img src="icons/home.png" style="width:26px;height:26px;display:block;margin:0 auto 4px;" />Home</button>
    <button onclick="goChats()"><img src="icons/chat.png" style="width:26px;height:26px;display:block;margin:0 auto 4px;" />Chats</button>
    <button onclick="goGames()"><img src="icons/game.png" style="width:26px;height:26px;display:block;margin:0 auto 4px;" />Games</button>
    <button onclick="goProfile()"><img src="icons/profile.png" style="width:26px;height:26px;display:block;margin:0 auto 4px;" />Profile</button>
    <button onclick="goFriends()" class="active"><img src="icons/friends.png" style="width:26px;height:26px;display:block;margin:0 auto 4px;" />Friends</button>
</div>

</body>
</html>
